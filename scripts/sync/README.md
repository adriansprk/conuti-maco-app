# Sync Scripts - Quick Guide

This workspace tracks external repositories (`maco-api-documentation`, `maco-edi-testfiles`, `docs-offline`) and regenerates `PROCESS_GRAPH.json` when they change.

## How It Works

1. **External repos change** → Pull/update them in your workspace
2. **Check what changed** → `check-changes.sh` reports updates
3. **Sync tracking** → `sync-changes.sh` updates metadata
4. **Regenerate index** → `update-process-graph-minimal.py` rebuilds `PROCESS_GRAPH.json`

## Quick Start

### Typical Workflow

```bash
# 1. Check for changes in external repos
./scripts/sync/check-changes.sh

# 2. If schemas need rebuilding (build script changed)
./scripts/sync/rebuild-schemas.sh

# 3. If docs changed (new markdown files)
./scripts/download-docs.sh
python3 scripts/sync/update-process-graph-minimal.py

# 4. Update tracking metadata
./scripts/sync/sync-changes.sh
```

### Example: Updating After External Repo Changes

```bash
# Pull latest from external repos
cd maco-api-documentation && git pull && cd ..
cd maco-edi-testfiles && git pull && cd ..

# Check what changed
./scripts/sync/check-changes.sh

# If build script changed, rebuild schemas
./scripts/sync/rebuild-schemas.sh

# If docs changed, regenerate index
python3 scripts/sync/update-process-graph-minimal.py

# Update tracking
./scripts/sync/sync-changes.sh
```

## Scripts

| Script | Purpose | When to Use |
|--------|---------|-------------|
| `check-changes.sh` | Check for updates in external repos | Before syncing |
| `sync-changes.sh` | Update tracking metadata | After pulling changes |
| `rebuild-schemas.sh` | Rebuild JSON schemas | When build script changes |
| `update-process-graph-minimal.py` | Regenerate PROCESS_GRAPH.json | When docs or schemas change |

## Files

- `version-tracker.json` - Tracks what's been synced (commit hashes, timestamps)
- `PROCESS_GRAPH.json` - Generated index pointing to source docs (regenerated by Python script)

## Notes

- **`llm.txt`** is manually downloaded from `doc.macoapp.de` (not from repos)
- **Build script changes** are critical - always rebuild schemas if `maco-api-documentation/scripts/build-openapi-json.sh` changes
- **Philosophy**: Scripts create indexes pointing to files; agents read source docs for details

See `LLM_TXT_NOTE.md` and `MINIMAL_INDEX_PHILOSOPHY.md` for details.
