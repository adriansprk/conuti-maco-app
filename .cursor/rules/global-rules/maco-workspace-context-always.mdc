---
description: Core MaCo API workspace context and file structure - always applied
alwaysApply: true
tags: [context, workspace, maco-api, global]
priority: 1
version: 1.0.0
---

# MaCo API Workspace - Global Context

## Workspace Role & Goal

- **Role**: Lieferant (LF) - electricity supplier
- **Goal**: Enable backend to use MaCo API to communicate MaKo (Market Communication) messages into the market and receive results from market
- **Approach**: Support both business-concept-driven discovery and technical message-driven implementation
- **Future Vision**: Agent system that uses database entries to pre-create messages, validates against Conuti, and provides feedback on missing fields/functionality

## Core File Structure

**Always Available Files**:
- `PROCESS_GRAPH.json` - Process dependencies & sequences (machine-readable, fast lookup)
- `BUSINESS_PROCESS_MAP.md` - Business goal discovery (Entry Point 1)
- `AI_AGENT_SETUP.md` - Technical implementation (Entry Point 2)
- `llm.txt` - Documentation index (237 entries) - Find which docs you need
- `docs-offline/` - 232 offline documentation files (Prozessübersicht, process descriptions, EBD diagrams)
- `maco-edi-testfiles/` - 2,549 EDI test files (real-world message examples in EDIFACT and BO4E JSON)

**API Schema Files** (`maco-api-documentation/_build/`):
- `bo4e-openapi.min.json` - BO4E data structures and types
- `macoapp-schreiben.min.json` - Write operations (storing process data)
- `macoapp-lesen.min.json` - Read operations (reading BO4E objects)
- `macoapp-trigger.min.json` - Trigger events (outbound to Conuti)
- `maloident-macoapp.min.json` - MaloIdent requests (outbound)
- `maloident-lieferant.min.json` - MaloIdent responses (inbound webhooks)

## Key Concepts

- **Process IDs**: BDEW Prüfidentifikatoren (5-digit numbers, e.g., "55077")
- **API Direction**:
  - **Outbound**: Backend calls Conuti API (trigger, send data)
  - **Inbound**: Conuti calls backend webhooks (receive responses, receive data)
- **Processes are asynchronous**: Responses come from NB (network operator) and MSB (meter operator)
- **All `.min.json` files are formatted** (not minified) for readability

## Process Lookup (PROCESS_GRAPH.json)

Use `PROCESS_GRAPH.json` for fast lookups:
- By pruefi: `indexes.by_pruefi["55077"]` → LIEFERBEGINN
- By trigger: `indexes.by_trigger["START_LIEFERBEGINN"]` → LIEFERBEGINN
- Process details: `processes.LIEFERBEGINN.triggers_processes`, `processes.LIEFERBEGINN.prerequisites`

## Workflow Pattern

**CRITICAL**: Always read documentation files before answering. See anti-hallucination-mandatory-always.mdc for verification requirements.

1. **Identify entry point** (business goal vs. specific message)
2. **READ documentation FIRST** - Never guess or assume
3. **Use appropriate guide** (BUSINESS_PROCESS_MAP.md or AI_AGENT_SETUP.md)
4. **Lookup in PROCESS_GRAPH.json** for dependencies and sequences
5. **Reference documentation** via llm.txt → docs-offline/
6. **Check examples** in maco-edi-testfiles/
7. **Verify against schemas** (PI_[ID].yml) and business rules (yaml_output/[ID].yaml)
8. **Cite sources** in your response
9. **Build implementation** using verified schemas and business rules
