---
description: Business goal discovery workflow - maps business goals to MaKo processes and implementation steps (repo-first, source-grounded)
globs:
  - "**/BUSINESS_PROCESS_MAP.md"
  - "**/PROCESS_GRAPH.json"
  - "docs/entry-points/**/*"
  - "backend/**/*"
  - "src/**/*"
  - "services/**/*"
alwaysApply: false
tags: [business, discovery, workflow, entry-point-1]
priority: 2
version: 1.1.0
---

# Business Goal Discovery - Entry Point 1

## When to Use This Rule

Apply when user asks about:
- Business goals (e.g., “new customer signup”, “cancel contract”, “supplier change”)
- Which MaKo processes are needed for a scenario
- Designing backend services for a business workflow

## Workflow: Business Goal → Implementation

### Step 1: Start with BUSINESS_PROCESS_MAP.md (no guessing)

1. **READ** `docs/entry-points/BUSINESS_PROCESS_MAP.md`
2. Identify the scenario and the referenced process names / BDEW IDs (cite source)

### Step 2: Use PROCESS_GRAPH.json for discovery (index-only)

Use `docs/entry-points/PROCESS_GRAPH.json` to discover **which source docs to read**, via:
- `indexes.by_process_name["..."]`
- `indexes.by_trigger["..."]`
- `indexes.by_bdew_id["55077"]`

⚠️ **Option A note**: In this repo `PROCESS_GRAPH.json` is `version: 2.0.0-minimal`. Do **not** claim prerequisites/dependencies from `PROCESS_GRAPH.processes.*`. Derive them by reading the referenced `docs-offline/*.md` sources (Mermaid + prose; follow `ref`).

⚠️ If an example key isn’t present, inspect `indexes.*` in the actual file and use what exists.

### Step 3: Output Mode (fast-path vs workflow)

**Fast Path (narrow business lookup)**: If user only wants “which processes are involved”, return:
- List of processes (names + BDEW IDs if available)
- Preconditions (high level)
- Key docs to read next (citations)

**Workflow request**: If user asks for “how does this flow work end-to-end”, include:
- Sequence diagram (Mermaid)
- Dependency flowchart (Mermaid)
- Example message references (v202510)

(Follow the visualization rule’s fast-path guidance.)

### Step 4: Cross-reference the right doc type (maximize repo value)

- **WHY / business context**: `docs-offline/{process}.md` and related Prozessübersichten
- **WHAT fields are required**: `maco-api-documentation/.../PI_[ID].yml` + `yaml_output/[ID].yaml`
- **WHAT will be validated / rejection codes**: EBD (if process docs reference `Entscheidungsbaum E_{code}`)
  - ⚠️ Always use newest `ebd-diagrams/FV{YYMM}/`
  - Read `E_{code}.json` for validation steps + rejection codes
- **HOW it’s implemented technically**: PNG (if available)
  - Canonical: `docs-offline/prozessdiagramme-png/INDEX.md` → view `{process}.png`
  - Fallback (legacy): `docs-offline/Prozessdiagramme PNG/`

### Step 5: Check examples (⚠️ v202510 only)

- Inbound EDI (received): `maco-edi-testfiles/inbound/v202510/`
- Outbound JSON (sent): `maco-edi-testfiles/outbound/v202510/`

## Non-negotiables

- Never claim process details without reading the referenced docs
- Never use v202404 examples
- If PNG/EBD doesn’t exist for a process, state that explicitly

